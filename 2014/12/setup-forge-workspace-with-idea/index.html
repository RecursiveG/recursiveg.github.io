<!DOCTYPE HTML><html><head><meta charset="UTF-8"><title>IDEA 下建立 Forge 开发环境的正确姿势 | RECURSIVE LAND</title><meta name="author" content="RecursiveG"><meta name="description" content="Minecraft mod developing in seperated folders under linux with IDEA."><meta name="keywords" content="Minecraft,Modding,Forge,ForgeGradle,IDEA,IntellijIDEA"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="IDEA 下建立 Forge 开发环境的正确姿势"><meta property="og:site_name" content="RECURSIVE LAND"><meta property="og:image" content="undefined"><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="RECURSIVE LAND" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><script type="text/javascript">top.location!=self.location&&(alert("No iFrame Allowed!"),top.location=self.location)</script><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><script>-1==window.location.origin.indexOf("localhost")&&-1==window.location.origin.indexOf("127.0.0.1")&&(!function(e,n,o,a,t,i,c){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,i=n.createElement(o),c=n.getElementsByTagName(o)[0],i.async=1,i.src=a,c.parentNode.insertBefore(i,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-37331447-3","auto"),ga("send","pageview"))</script></head></html><body><header id="header" class="inner"><div class="alignleft"><h1><a href="/">RECURSIVE LAND</a></h1><h2><a href="/">A Blog of Recursive G</a></h2></div><nav id="main-nav" class="alignright"><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Archives</a></li><li><a href="https://github.com/RecursiveG">Github</a></li><li><a href="/atom.xml">RSS</a></li></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div id="content" class="inner"><div id="main-col" class="alignleft"><div id="wrapper"><article class="post"><div class="post-content"><header><div class="icon"></div><time datetime="2014-12-11T06:17:48.000Z"><a href="/2014/12/setup-forge-workspace-with-idea/">Dec 11 2014</a></time><h1 class="title">IDEA 下建立 Forge 开发环境的正确姿势</h1></header><div class="entry"><h1 id="前言"><a href="# 前言" class="headerlink" title="前言"></a>前言</h1><p>见过不少教程都是基于 Eclipse 的，而基于 IDEA 的文章少得可怜，遂决定写此文。<br>本文通篇基于 Linux/IntellijIDEA 进行讲解，Windows/MAC/Eclipse 用户请自行依葫芦画瓢。</p><h1 id="设置 Forge 工作区"><a href="# 设置 Forge 工作区" class="headerlink" title="设置 Forge 工作区"></a>设置 Forge 工作区</h1><p>当然，你得首先去 <a href="http://files.minecraftforge.net/" target="_blank" rel="external">MinecraftForge</a> 下载一份源代码。我这里用的是最新的 <code>forge-1.7.10-10.13.2.1258-src.zip</code><br>接着，找个地方建立一个文件夹，这将是你的工程目录，我的叫做 <code>Forge1.7.10-1258</code>。然后再在里面建立一个目录，比方说就叫<code>forge-1.7.10-10.13.2.1258-src</code>，把你的 Forge 源码解压进去。<br>现在，你的文件夹层次应该看起来是这样的：</p><pre><code>Forge1.7.10-1258
└── forge-1.7.10-10.13.2.1258-src
     ├── build.gradle
     ├── CREDITS-fml.txt
     ├── eclipse
     ├── forge-1.7.10-10.13.2.1258-changelog.txt
     ├── gradle
     ├── gradlew
     ├── gradlew.bat
     ├── LICENSE-fml.txt
     ├── MinecraftForge-Credits.txt
     ├── MinecraftForge-License.txt
     ├── README.txt
     └── src
</code></pre><p>你可以先按自己喜好改动一下 <code>build.gradle</code>。比如，我喜欢手动指定一下 mappings 的版本：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">minecraft &#123;</span><br><span class="line">    version = <span class="string">"1.7.10-10.13.2.1258"</span></span><br><span class="line">    runDir = <span class="string">"eclipse"</span></span><br><span class="line">    mappings = <span class="string">"stable_12"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着，cd 到 forge-1.7.10-10.13.2.1258-src 目录下，执行如下两条命令：</p><pre><code>gradle -i setupDecompWorkspace
gradle -i ideaModule
</code></pre><p>然后请耐心等待指令完成，可以去喝杯牛奶睡个觉什么的。<br><a id="more"></a></p><h1 id="导入到 IDEA"><a href="# 导入到 IDEA" class="headerlink" title="导入到 IDEA"></a>导入到 IDEA</h1><p>等以上操作完成后，就可以打开 IDEA，选“Create New Project”，注意要建立一个 <strong>空工程 </strong>（Empty Project）<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/1.png" alt="Create New Project"><br>“Project Name”自然可以随意填写，”Project Location”则是之前创建的目录，下方的”Project Format”推荐选”Directory Based”<br>点”Finish”之后应该会自动打开”Project Structure”窗口，如果没有的话可以按 Ctrl+Alt+Shift+S 或是从菜单栏”File –&gt; Project Structure”<br>打开窗口之后我们首先要选择 SDK 版本：先点左边的”Project”，然后在右边”Project SDK”里选一个，我是选了 Java8，你当然可以选择任何版本（不要低于 Java6）<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/2.png" alt="Select Project SDK"><br>接着点左边的”Modules”, 再点那个绿色的“+”号，接着选”Import Module”<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/3.png" alt="Location of &quot;Import Module&quot;"><br>然后选 forge-1.7.10-10.13.2.1258-src 目录下的 <code>forge-1.7.10-10.13.2.1258-src.iml</code> 文件就好。<br>Import 完了之后检查下有没有报错，如果没问题就可以点右下角 OK。</p><p>重新 cd 到 forge-1.7.10-10.13.2.1258-src 目录下，执行如下三条命令让 gradle 自动建立运行配置。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="_">-s</span> ../.idea .</span><br><span class="line">gradle -i genIntellijRun</span><br><span class="line">rm .idea</span><br></pre></td></tr></table></figure><p>回到 IDEA，然后有必要的话重新加载一下 Project。继续选菜单栏”Run –&gt; Edit Configurations”, 点左侧的”Minecraft Client”，修改”Working Directory”到 <code>forge-1.7.10-10.13.2.1258-src/eclipse</code>。<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/4.png" alt="Edit Configuration"><br>你也可以像我一样指定一个 username。接着对”Minecraft Server”也如法炮制。然后右下角”OK”退出。</p><p>现在 Forge 应该就可以运行了，在 IDEA 的主界面右上角有这么一片区域，选”Minecraft Client”然后点右侧那个绿色的三角箭头即可<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/5.png" alt="Execution Control Bar"></p><h1 id="一个 Mod！"><a href="# 一个 Mod！" class="headerlink" title="一个 Mod！"></a> 一个 Mod！</h1><p>如果之前的步骤都没有问题，你就可以继续了<br>为了更好地演示运行配置以及发布流程，我决定写一个 Mod，添加一种矿石：“Xp Ore”, 顾名思义，挖掉后能得到大量经验。</p><p>我们需要新建一个 Module 来写我们的代码：菜单栏”File –&gt; New Module”<br>我就叫 XpOre 好了，然后继续打开”Project Structure”，将 <code>forge-1.7.10-10.13.2.1258-src</code> 添加成为它的依赖。<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/6.png" alt="Add to Dependencies"><br>那个菜单同样是点右边的绿色加号出来，点”Module Dependency”后在弹出来的窗口里选”forge-1.7.10-10.13.2.1258-src”然后”OK”即可。</p><p>之后就可以写 Mod 了！至于具体 Mod 怎么写我就不在这里提了，请各位参考其他文章。<br>这是我的代码和目录层次结构，请自行调整，我就不把每一步的细节都写出来了。<br>请记得把 <code>java</code> 和<code>resources</code>两个目录设置成代码根目录和资源根目录，具体方法是在文件夹上右键然后”Mark Directory As”<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/7.png" alt="The Module Tree"><br>（xp_ore.png 是矿石的材质，其实就是拿金矿石的材质把几个像素涂成绿色让它看起来比较像附魔瓶的颜色）<br>为了防止图挂，我再拿文本形式列一下目录</p><pre><code>XpOre
├── src
│   └── main
│       ├── java (Sources Root)
│       │   └── org
│       │       └── devinprogress
│       │           └── xpore
│       │               └── XpOre.java
│       └── resources (Resources Root)
│           ├── assets
│           │   └── xpore
│           │       ├── lang
│           │       │   └── en_US.lang
│           │       └── textures
│           │           └── blocks
│           │               └── xp_ore.png
│           └── mcmod.info
└── XpOre.iml
</code></pre><p>要想让这个 Mod 在 IDEA 里运行起来，有两种方式。第一种比较简单，直接菜单栏”Run –&gt; Edit Configurations –&gt; ‘Minecraft Client’ –&gt; Use classpath of mod …”下拉列表里选”XpOre”，保存退出运行即可。这种方式比较适合只开发一个 Mod 的情况。<br>当有 N 个 Module 互相依赖的时候，我推荐创建另一个 Module，比方说，叫”Run”。然后令其依赖 <code>forge-1.7.10-10.13.2.1258-src</code> 和你需要加载的其他 Module，然后”Use classpath of mod”选择”Run”即可。</p><h1 id="发布"><a href="# 发布" class="headerlink" title="发布"></a>发布</h1><p>发布其实相当方便，把 forge-1.7.10-10.13.2.1258-src 文件夹里的 <code>build.gradle</code> 复制到 <code>XpOre</code> 文件夹下面<br>按自己喜好修改其中的 <code>version</code>,<code>group</code> 和<code>archivesBaseName</code>即可。比方说我的是：</p><pre><code>version = &quot;v0.1&quot;
group= &quot;org.devinprogress.xpore&quot;
archivesBaseName = &quot;XpOre-1.7.10&quot;
</code></pre><p>然后在 XpOre 文件夹下 <code>gradle build</code> 即可。运行完成后，就能在 <code>XpOre/build/libs/</code> 文件夹下找到编译好的 jar 了。</p><p>最后来一张 Mod 的效果图<br><img src="http://0f4529-files.oss-cn-hangzhou.aliyuncs.com/blog/setup-forge-idea/8.png" alt="XpOre Mod"></p></div><footer><div class="categories"><a href="/categories/Informatics/">Informatics</a></div><div class="tags"><a href="/tags/教程/">教程</a>, <a href="/tags/Minecraft/">Minecraft</a>, <a href="/tags/Java/">Java</a></div><div class="clearfix"></div></footer></div></article><section id="comment"><h1 class="title">留言</h1><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></div></div><aside id="sidebar" class="alignright"><div class="search"><form action="//google.com/search" method="get" accept-charset="utf-8"><input type="search" name="q" results="0" placeholder="搜索"> <input type="hidden" name="q" value="site:recursiveg.me"></form></div><div class="widget tag"><h3 class="title">最新文章</h3><ul class="entry"><li><a href="/2015/12/linux-socket-epoll-demo/">Linux 环境 TCP Socket 与 Epoll 使用备忘</a></li><li><a href="/2015/09/get-ipv6-via-gre-tunnel/">Linux 下建立 GRE 隧道并获取 IPv6 地址</a></li><li><a href="/2014/12/setup-forge-workspace-with-idea/">IDEA 下建立 Forge 开发环境的正确姿势</a></li><li><a href="/2014/11/minecraft-modding-with-asm/">Minecraft Coremod 开发杂事记</a></li><li><a href="/2014/07/domain-name-registrar-switched/">域名注册商更换</a></li></ul></div><div class="widget tag"><h3 class="title">分类</h3><ul class="entry"><li><a href="/categories/ACG/">ACG</a><small>1</small></li><li><a href="/categories/Informatics/">Informatics</a><small>17</small></li><li><a href="/categories/Programming/">Programming</a><small>1</small></li><li><a href="/categories/Site-Management/">Site Management</a><small>3</small></li><li><a href="/categories/uncategorized/">uncategorized</a><small>0</small></li></ul></div><div class="widget tagcloud"><h3 class="title">标签云</h3><div class="entry"><a href="/tags/ACM/" style="font-size:10px">ACM</a> <a href="/tags/Black-Technology/" style="font-size:14px">Black Technology</a> <a href="/tags/Epoll/" style="font-size:10px">Epoll</a> <a href="/tags/GFW/" style="font-size:10px">GFW</a> <a href="/tags/GRE-Tunnel/" style="font-size:10px">GRE Tunnel</a> <a href="/tags/Hello-World/" style="font-size:10px">Hello World!</a> <a href="/tags/Hexo/" style="font-size:10px">Hexo</a> <a href="/tags/IPv6/" style="font-size:10px">IPv6</a> <a href="/tags/Java/" style="font-size:12px">Java</a> <a href="/tags/Linux/" style="font-size:20px">Linux</a> <a href="/tags/MinGW/" style="font-size:10px">MinGW</a> <a href="/tags/Minecraft/" style="font-size:12px">Minecraft</a> <a href="/tags/PTRACE/" style="font-size:16px">PTRACE</a> <a href="/tags/Pascal/" style="font-size:10px">Pascal</a> <a href="/tags/Python/" style="font-size:10px">Python</a> <a href="/tags/RSA/" style="font-size:10px">RSA</a> <a href="/tags/Site-Management/" style="font-size:12px">Site Management</a> <a href="/tags/Socket/" style="font-size:10px">Socket</a> <a href="/tags/TCP/" style="font-size:10px">TCP</a> <a href="/tags/Written-In-English/" style="font-size:12px">Written In English</a> <a href="/tags/iDevice/" style="font-size:10px">iDevice</a> <a href="/tags/东方Project/" style="font-size:10px">东方Project</a> <a href="/tags/乱码/" style="font-size:10px">乱码</a> <a href="/tags/交叉编译/" style="font-size:10px">交叉编译</a> <a href="/tags/加密/" style="font-size:10px">加密</a> <a href="/tags/技术宅/" style="font-size:10px">技术宅</a> <a href="/tags/教程/" style="font-size:18px">教程</a> <a href="/tags/编程/" style="font-size:10px">编程</a> <a href="/tags/网盘/" style="font-size:12px">网盘</a></div></div><div class="widget blogroll"><h3 class="title">友情链接</h3><ul class="entry"><li><a href="http://exz.me/" title="Epix Sphere">Epix Sphere</a></li></ul></div><div class="widget copyleft"><h3 class="title">原创声明</h3><div class="entry"><center><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img class="nofancybox nolightbox" alt="CC-BY-SA 3.0" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a></center>除非特别声明，本站文章均由RecursiveG原创，均采用<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。</div></div></aside><div class="clearfix"></div></div><footer id="footer" class="inner"><div class="alignleft">&copy; 2016 RecursiveG</div><div class="clearfix"></div></footer><script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script><script src="/js/jquery.imagesloaded.min.js"></script><script src="/js/gallery.js"></script><script type="text/javascript">if(-1==window.location.origin.indexOf("localhost")&&-1==window.location.origin.indexOf("127.0.0.1")){var disqus_shortname="developmentinprogress";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()}</script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script type="text/javascript">!function(n){n(".fancybox").fancybox()}(jQuery)</script></body>